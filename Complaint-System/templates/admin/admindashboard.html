{% extends 'base.html' %}
{% block content %}



<div class="row">
    <div class="col-md-12 grid-margin">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-12">
              <div class="d-sm-flex align-items-baseline report-summary-header">
                <h5 class="font-weight-semibold">Admin Report Summary</h5> <span class="ml-auto">Updated Report</span> <button class="btn btn-icons border-0 p-2"><i class="icon-refresh"></i></button>
              </div>
            </div>
          </div>
          <div class="row report-inner-cards-wrapper">
            <div class=" col-md -6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Total Reg Users</span>
                <h4>{{user_count}}</h4>
                <a href="{% url 'manageusers' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-success">
                <i class="icon-user"></i>
              </div>
            </div>
            <div class="col-md-6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Total Category</span>
                <h4>{{category_count}}</h4>
                <a href="{% url 'manage_category' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-danger">
                <i class="icon-doc"></i>
              </div>
            </div>
            <div class="col-md-6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Total Subcategory</span>
                <h4>{{subcategory_count}}</h4>
                <a href="{% url 'manage_subcategory' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-warning">
                <i class="icon-doc"></i>
              </div>
            </div>
            <!-- <div class="col-md-6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Total State</span>
                <h4>{{state_count}}</h4>
                <a href="{% url 'manage_state' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-primary">
                <i class="icon-doc"></i>
              </div>
            </div> -->
          </div>
          <hr>
          <div class="row report-inner-cards-wrapper">
            <div class=" col-md -6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Total Complaints</span>
                <h4>{{complaints_count}}</h4>
                <a href="{% url 'lodgedcomplaint' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-primary">
                <i class="icon-doc"></i>
              </div>
            </div>
            <div class="col-md-6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">New Complaints</span>
                <h4>{{newcom_count}}</h4>
                <a href="{% url 'newcomplaints' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-warning">
                <i class="icon-doc"></i>
              </div>
            </div>
            <div class="col-md-6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Inprocess Complaints</span>
                <h4>{{ipcom_count}}</h4>
                <a href="{% url 'inprocesscomplaints' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-danger">
                <i class="icon-doc"></i>
              </div>
            </div>
            <div class="col-md-6 col-xl report-inner-card">
              <div class="inner-card-text">
                <span class="report-title">Closed Complaints</span>
                <h4>{{closed_count}}</h4>
                <a href="{% url 'closedcomplaints' %}"><span class="report-count"> View Details</span></a>
              </div>
              <div class="inner-card-icon bg-success">
                <i class="icon-doc"></i>
              </div>
            </div>
          </div>

          <!-- Doughnut Chart Section -->
          <div class="row justify-content-center" style="margin-top: 20px;">
            <div class="col-md-6 text-center">
                <h4>Complaint Status Overview</h4>
                <canvas id="adminComplaintStatusChart" width="150" height="150"></canvas>
            </div>
        </div>

        <script>
            var ctx = document.getElementById('adminComplaintStatusChart').getContext('2d');
            var adminComplaintStatusChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Not Processed Yet', 'In Process', 'Closed'],
                    datasets: [{
                        label: 'Complaint Status',
                        data: [{{ newcom_count }}, {{ ipcom_count }}, {{ closed_count }}],
                        backgroundColor: [
                            'rgba(255, 204, 51, 1)',  // Yellow for Not Processed Yet
                            'rgba(255, 51, 51, 1)',   // Red for In Process
                            'rgba(51, 204, 51, 1)'    // Green for Closed
                        ],
                        borderColor: [
                            'rgba(255, 204, 51, 1)',  // Yellow for Not Processed Yet
                            'rgba(255, 51, 51, 1)',   // Red for In Process
                            'rgba(51, 204, 51, 1)'    // Green for Closed
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Complaint Status Overview'
                        }
                    }
                }
            });
        </script>
        </div>
      </div>
    </div>
  </div>




{% endblock %}